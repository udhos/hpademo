<html>

<head>
    <meta charset="utf-8" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="assets/css/app.css">
    <script src="wasm_exec.js"></script>
    <script>
        const go = new Go();
        WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then((result) => {
            go.run(result.instance);
        });
    </script>
    <script src="assets/js/app.js"></script>
</head>

<body class="bg-gradient-to-br from-purple-600 to-indigo-700 min-h-screen p-8">
    <button id="darkModeToggle" onclick="toggleDarkMode()">üåô Dark Mode</button>

    <div class="container-custom mx-auto">
        <div class="bg-white rounded-2xl shadow-2xl p-8">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 id="title" class="text-5xl font-bold text-purple-600 mb-4">üöÄ HPA Demo</h1>
                <p>
                    <span class="font-bold">hpademo</span> is a simple demo for Kubernetes Horizontal Pod Autoscaler
                    (HPA), written in Go and compiled to WebAssembly.
                </p>
            </div>

            <!-- Links -->
            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-8 rounded">
                <div class="flex flex-col md:flex-row justify-center gap-4 text-center">
                    <div>
                        <span class="font-semibold">üåê Online:</span>
                        <a href="https://udhos.github.io/hpademo/www"
                            class="text-blue-600 hover:text-blue-800 hover:underline ml-2">
                            udhos.github.io/hpademo/www
                        </a>
                    </div>
                    <div>
                        <span class="font-semibold">üíª Source:</span>
                        <a href="https://github.com/udhos/hpademo"
                            class="text-blue-600 hover:text-blue-800 hover:underline ml-2">
                            github.com/udhos/hpademo
                        </a>
                    </div>
                </div>
            </div>

            <!-- Demo Area -->
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- Canvas Area -->
                <div class="lg:col-span-3">
                    <!-- Replicas Chart -->
                    <div class="text-lg font-bold text-gray-700 mb-4">Replicas</div>
                    <div class="canvas-panel border-2 border-purple-500 rounded-xl shadow-lg p-2">
                        <canvas id="canvas_pods" width="1000" height="200" class="w-full rounded-lg"></canvas>
                    </div>
                    <center>
                        <div id="canvas_pods_legend" class="stats-container">
                            <div class="stat-card">
                                <span class="stat-label">Min</span>
                                <span class="stat-value legend-min">N/A</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Max</span>
                                <span class="stat-value legend-max">0</span>
                            </div>
                            <div class="stat-card highlight">
                                <span class="stat-label">Current</span>
                                <span class="stat-value legend-current">0</span>
                            </div>
                        </div>
                    </center>

                    <!-- Pod CPU Usage Chart -->
                    <div class="text-lg font-bold text-gray-700 mb-4 mt-6">Per-Pod CPU Usage (mCores)</div>
                    <div class="canvas-panel border-2 border-purple-500 rounded-xl shadow-lg p-2">
                        <canvas id="canvas_pod_cpu_usage" width="1000" height="200" class="w-full rounded-lg"></canvas>
                    </div>
                    <center>
                        <div id="canvas_pod_cpu_usage_legend" class="stats-container">
                            <div class="stat-card">
                                <span class="stat-label">Min</span>
                                <span class="stat-value legend-min">N/A</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Max</span>
                                <span class="stat-value legend-max">0</span>
                            </div>
                            <div class="stat-card highlight">
                                <span class="stat-label">Current</span>
                                <span class="stat-value legend-current">0</span>
                            </div>
                        </div>
                    </center>

                    <!-- Unmet CPU Load Chart -->
                    <div class="text-lg font-bold text-gray-700 mb-4 mt-6">Total Unmet CPU Load (mCores)</div>
                    <div class="canvas-panel border-2 border-purple-500 rounded-xl shadow-lg p-2">
                        <canvas id="canvas_unmet_cpu_load" width="1000" height="200" class="w-full rounded-lg"></canvas>
                    </div>
                    <center>
                        <div id="canvas_unmet_cpu_load_legend" class="stats-container">
                            <div class="stat-card">
                                <span class="stat-label">Min</span>
                                <span class="stat-value legend-min">N/A</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Max</span>
                                <span class="stat-value legend-max">0</span>
                            </div>
                            <div class="stat-card highlight">
                                <span class="stat-label">Current</span>
                                <span class="stat-value legend-current">0</span>
                            </div>
                        </div>
                    </center>
                </div>

                <!-- Controls Area -->
                <div class="lg:col-span-1">
                    <div class="controls-panel rounded-xl shadow-lg p-4">
                        <div id="controls">
                            <!-- Input Section -->
                            <div class="input-section">
                                <h4 class="section-title">‚ö° System Load Simulation</h4>

                                <!-- Total CPU Usage -->
                                <div class="control-item">
                                    <label for="slider-cpu-usage">Total CPU Usage (mCores)</label>
                                    <div class="input-row">
                                        <input type="range" id="slider-cpu-usage" min="10" max="100000" value="200">
                                        <input type="number" id="textbox-cpu-usage" min="10" max="100000" value="200">
                                    </div>
                                </div>
                            </div>

                            <!-- Configuration Section -->
                            <div class="config-section">
                                <h4 class="section-title">‚öôÔ∏è HPA Configuration</h4>

                                <!-- POD CPU Request -->
                                <div class="control-item">
                                    <label for="slider-pod-cpu-request">POD CPU Request (mCores)</label>
                                    <div class="input-row">
                                        <input type="range" id="slider-pod-cpu-request" min="10" max="10000"
                                            value="200">
                                        <input type="number" id="textbox-pod-cpu-request" min="10" max="10000"
                                            value="200">
                                    </div>
                                </div>

                                <!-- POD CPU Limit -->
                                <div class="control-item">
                                    <label for="slider-pod-cpu-limit">POD CPU Limit (mCores)</label>
                                    <div class="input-row">
                                        <input type="range" id="slider-pod-cpu-limit" min="10" max="10000" value="600">
                                        <input type="number" id="textbox-pod-cpu-limit" min="10" max="10000"
                                            value="600">
                                    </div>
                                </div>

                                <!-- HPA Min Replicas -->
                                <div class="control-item">
                                    <label for="slider-hpa-min-replicas">HPA Min Replicas</label>
                                    <div class="input-row">
                                        <input type="range" id="slider-hpa-min-replicas" min="1" max="1000" value="1">
                                        <input type="number" id="textbox-hpa-min-replicas" min="1" max="1000" value="1">
                                    </div>
                                </div>

                                <!-- HPA Max Replicas -->
                                <div class="control-item">
                                    <label for="slider-hpa-max-replicas">HPA Max Replicas</label>
                                    <div class="input-row">
                                        <input type="range" id="slider-hpa-max-replicas" min="1" max="1000" value="10">
                                        <input type="number" id="textbox-hpa-max-replicas" min="1" max="1000"
                                            value="10">
                                    </div>
                                </div>

                                <!-- HPA Target CPU Utilization -->
                                <div class="control-item">
                                    <label for="slider-hpa-target-cpu">HPA Target CPU Utilization</label>
                                    <div class="input-row">
                                        <input type="range" id="slider-hpa-target-cpu" min="1" max="200" value="80">
                                        <input type="number" id="textbox-hpa-target-cpu" min="1" max="200" value="80">
                                    </div>
                                </div>

                                <!-- Divider -->
                                <hr class="control-divider">

                                <!-- Number of Pods -->
                                <div class="control-item">
                                    <label for="slider-number-of-pods">
                                        Number of Pods
                                        <span class="badge-auto">MANUAL & COMPUTED</span>
                                    </label>
                                    <div class="input-row">
                                        <input type="range" id="slider-number-of-pods" min="1" max="1000" value="1">
                                        <input type="number" id="textbox-number-of-pods" min="1" max="1000" value="1">
                                    </div>
                                </div>

                                <!-- History Size -->
                                <div class="control-item">
                                    <label for="slider-history-size">History Size (seconds)</label>
                                    <div class="input-row">
                                        <input type="range" id="slider-history-size" min="60" max="3600" value="600">
                                        <input type="number" id="textbox-history-size" min="60" max="3600" value="600">
                                    </div>
                                </div>

                                <!-- Scale Down Stabilization Window -->
                                <div class="control-item">
                                    <label for="scale-down-stabilization-window">HPA Scale Down Stabilization Window
                                        (seconds)</label>
                                    <div class="input-row">
                                        <input type="range" id="slider-scale-down-stabilization-window" min="0"
                                            max="600" value="300">
                                        <input type="number" id="textbox-scale-down-stabilization-window" min="0"
                                            max="600" value="300">
                                    </div>
                                </div>

                                <!-- POD startup time -->
                                <div class="control-item">
                                    <label for="pod-startup-time">POD Startup Time (seconds)</label>
                                    <div class="input-row">
                                        <input type="range" id="slider-pod-startup-time" min="0" max="180" value="20">
                                        <input type="number" id="textbox-pod-startup-time" min="0" max="180" value="20">
                                    </div>
                                </div>

                                <!-- POD stop time -->
                                <div class="control-item">
                                    <label for="pod-stop-time">POD Stop Time (seconds)</label>
                                    <div class="input-row">
                                        <input type="range" id="slider-pod-stop-time" min="0" max="60" value="10">
                                        <input type="number" id="textbox-pod-stop-time" min="0" max="60" value="10">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>